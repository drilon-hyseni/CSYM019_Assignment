<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manage Event - Admin Dashboard</title>
    <link rel="stylesheet" href="add-event.css" />
    <link rel="stylesheet" href="../../../styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Select2 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <!-- sweetalert2 -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.all.min.js"></script>
    <!-- Quill JS -->
    <link
      href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>
    <script src="manage-event.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 id="page-title">Add New Event</h1>
        <button class="back-button" id="back-to-dashboard">
          <i class="fas fa-arrow-left"></i> Back to Events
        </button>
      </div>

      <div class="form-container">
        <form id="manage-event-form" enctype="multipart/form-data">
          <!-- Hidden field to store event ID for edit mode -->
          <input type="hidden" id="event-id" name="event_id" value="" />

          <div class="form-section">
            <h2><i class="fas fa-info-circle"></i> Event Information</h2>

            <div class="form-group">
              <label for="event-title"
                >Event Title <span class="required">*</span></label
              >
              <input
                type="text"
                id="event-title"
                name="event_title"
                class="form-control"
                required
              />
            </div>

            <div class="form-group">
              <label for="event-description-editor">
                Event Description <span class="required">*</span>
              </label>
              <div
                id="event-description-editor"
                style="height: 200px; background-color: white"
              ></div>

              <!-- Hidden input to submit the Quill content -->
              <input
                type="hidden"
                name="event_description"
                id="event-description"
              />
            </div>

            <div class="form-row">
              <div class="form-group half">
                <label for="event-date"
                  >Event Date <span class="required">*</span></label
                >
                <input
                  type="datetime-local"
                  id="event-date"
                  name="event_date"
                  class="form-control"
                  required
                />
              </div>

              <div class="form-group half">
                <label for="event-location"
                  >Location <span class="required">*</span></label
                >
                <input
                  type="text"
                  id="event-location"
                  name="location"
                  class="form-control"
                  required
                />
              </div>
            </div>

            <div class="form-group">
              <label for="event-categories"
                >Categories <span class="required">*</span></label
              >
              <select
                id="event-categories"
                name="categories[]"
                class="form-control select2"
                multiple
                required
              >
                <!-- Categories will be loaded here -->
              </select>
              <small class="form-text"
                >Select one or more categories for this event</small
              >
            </div>
          </div>

          <div class="form-group">
            <label for="event-image">Event Image</label>
            <div class="image-upload-container">
              <div class="image-upload-box" id="image-upload-1">
                <div class="upload-placeholder">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <p>Click to Upload</p>
                </div>
                <img
                  class="preview-image"
                  src="#"
                  alt="Preview"
                  style="display: none"
                />
                <input
                  type="file"
                  name="event_image"
                  class="image-input"
                  accept="image/jpeg, image/png"
                  data-index="1"
                />
                <button
                  type="button"
                  class="remove-image"
                  style="display: none"
                >
                  <i class="fas fa-times"></i>
                </button>
                <!-- Hidden input to store existing image ID for edit mode -->
                <input
                  type="hidden"
                  id="existing-image"
                  name="existing_image_id"
                  value=""
                />
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary" id="save-button">
              <i class="fas fa-save"></i> Save Event
            </button>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
